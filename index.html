<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Live Earthquake Reports</title>
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- Add this link to include FontAwesome CSS -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" rel="stylesheet" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
  <style>
    /* Add custom styles here */
    body {
      padding-top: 0 px; /* Adjusted to accommodate the fixed Navbar height */
    }
  
    /* Dark theme */
    body.dark-mode {
      background-color: #1a1a1a;
      color: #ffffff;
    }
  
    /* Light theme */
    body.light-mode {
      background-color: #ffffff;
      color: #000000;
    }
  
    /* Add styling for the dark mode switch */
    .theme-toggle {
      position: fixed;
      top: 0 px;
      right: 30px;
      display: flex;
      align-items: center;
      color: #ffffff;
    }
  
    .theme-toggle .slider {
      position: absolute;
      cursor: pointer;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: #ccc;
      -webkit-transition: .4s;
      transition: .4s;
    }
  
    .theme-toggle .slider:before {
      position: absolute;
      content: "";
      height: 26px;
      width: 26px;
      left: 4px;
      bottom: 4px;
      background-color: #fff;
      -webkit-transition: .4s;
      transition: .4s;
    }
  
    input:checked + .slider {
      background-color: #2196F3;
    }
  
    input:checked + .slider:before {
      -webkit-transform: translateX(26px);
      -ms-transform: translateX(26px);
      transform: translateX(26px);
    }
  
    .slider.round {
      border-radius: 34px;
    }
  
    .slider.round:before {
      border-radius: 50%;
    }
  </style>
</head>
<body class="light-mode">

    

  <!-- Navbar -->
  <nav class="navbar navbar-expand-lg navbar-dark" style="background-color: #001f3f; /* Dark blue color */" fixed-top>
    <div class="container-fluid">
      <a class="navbar-brand" href="#">
        <img src="philippines-flag.png" alt="Philippine Flag" width="45" height="30" class="d-inline-block align-text-top">
        Live Earthquake Reports
      </a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav ml-auto"> <!-- Align items to the right -->
          <li class="nav-item">
            <a class="nav-link" href="#" data-bs-toggle="modal" data-bs-target="#aboutUsModal">
              <i class="fas fa-info-circle"></i> About Me
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#" data-bs-toggle="modal" data-bs-target="#contactCityModal">
              <i class="fas fa-phone"></i> Emergency Contact Information
            </a>
          </li>
          <li class="navbar-brand" href="#">
            <img src="refresh.png" alt="Philippine Flag" style="right: inherit;" width="30" height="30" class="d-inline-block align-text-top">
             Website is automatically refresh every 15 seconds.
        </li>
          <!-- Dark mode switch -->
        <div class="theme-toggle">
          <label class="switch">
            <input type="checkbox" id="themeToggleBtn">
            <span class="slider round"></span>
          </label>
          <i class="fas fa-moon"></i>
        </div>
        </ul>
      </div>
    </div>
  </nav>

<!-- Modals for About Us and Contact Us -->
<div class="modal fade" id="aboutUsModal" tabindex="-1" aria-labelledby="aboutUsModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="aboutUsModalLabel">About Us</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <p>
          My name is Mike Franco, a Filipino developer who volunteers to contribute to the betterment of our community through this external website dedicated to earthquake monitoring. With a passion for technology and a commitment to public service, I have integrated additional features to enhance your experience while accessing earthquake reports from PHIVOLCS-DOST.
        </p>
        <p>
          As a concerned citizen, I believe in the importance of providing accessible and reliable information to fellow Filipinos. This website is my humble effort to assist you in staying informed about seismic activities, ensuring that you have the latest and most relevant data at your fingertips. Your safety is my priority, and I hope this platform proves valuable in keeping you well-prepared.
        </p>
        <p>
          I extend my gratitude to the Philippine Institute of Volcanology and Seismology (PHIVOLCS-DOST) for generously sharing earthquake monitoring data. This collaboration aims to empower you with essential information to navigate seismic events effectively. Thank you for trusting this platform, and I am dedicated to continually improving and expanding its capabilities for the benefit of our community.
        </p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

<!-- Modal for City List -->
<div class="modal fade" id="contactCityModal" tabindex="-1" aria-labelledby="contactCityModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="contactCityModalLabel">Select City</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <ul class="list-group">
          <li class="list-group-item"><a href="#" data-bs-toggle="modal" data-bs-target="#emergencyContactModal" data-city="Surigao City">Surigao City</a></li>
          <li class="list-group-item"><a href="#" data-bs-toggle="modal" data-bs-target="#emergencyContactModal" data-city="Surigao del Sur">Surigao del Sur</a></li>
          <li class="list-group-item"><a href="#" data-bs-toggle="modal" data-bs-target="#emergencyContactModal" data-city="Surigao del Norte">Surigao del Norte</a></li>
          <li class="list-group-item"><a href="#" data-bs-toggle="modal" data-bs-target="#emergencyContactModal" data-city="Butuan City">Butuan City</a></li>
          <!-- Add more cities as needed -->
        </ul>
      </div>
    </div>
  </div>
</div>

<!-- Modal for Emergency Contact -->
<div class="modal fade" id="emergencyContactModal" tabindex="-1" aria-labelledby="emergencyContactModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="emergencyContactModalLabel">Emergency Contacts</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body" id="emergencyContactList">
        <!-- Contact information will be dynamically inserted here -->
      </div>
    </div>
  </div>
</div>

<div class="container mt-5">
  <h1 class="text-center mb-4">Philippines Live Earthquake Monitoring Reports</h1>

  <!-- Added disclaimer paragraph with border -->
  <div class="border p-3">
    <p class="text-muted">
      üåê <strong>Disclaimer:</strong>
      Our website utilizes earthquake monitoring data generously provided by the Philippine Institute of Volcanology and Seismology (PHIVOLCS-DOST). We extend our sincere appreciation to PHIVOLCS for their unwavering commitment to public safety. All earthquake-related information, including maps and alerts, is sourced directly from PHIVOLCS, and we credit them as the exclusive provider of these invaluable resources. Please note that any discrepancies or inaccuracies in the earthquake data are unintentional and the sole responsibility of PHIVOLCS. This website is not affiliated with PHIVOLCS, and users are encouraged to visit the official PHIVOLCS website (<a href="https://www.phivolcs.dost.gov.ph/" target="_blank" rel="noopener noreferrer">https://www.phivolcs.dost.gov.ph/</a>) for the most up-to-date and accurate information.
    </p>
  </div>

  <!-- Embedded iframe for the specified link with border -->
  <div class="border p-3">
    <iframe id="earthquakeIframe" src="https://earthquake.phivolcs.dost.gov.ph/" width="100%" height="600" frameborder="0" allowfullscreen></iframe>
  </div>
</div>

<!-- Bootstrap JS and Popper.js -->
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.min.js"></script>

<!-- Your custom JavaScript -->
<script>
  document.addEventListener("DOMContentLoaded", function () {
    // Theme toggle button
    const themeToggleBtn = document.getElementById('themeToggleBtn');
    const themeLabel = document.getElementById('themeLabel');
    const body = document.body;

    // Event listener for theme toggle
    themeToggleBtn.addEventListener('change', function () {
      if (this.checked) {
        // Dark mode
        body.classList.add('dark-mode');
        body.classList.remove('light-mode');
        themeLabel.innerText = 'Light Mode';
      } else {
        // Light mode
        body.classList.add('light-mode');
        body.classList.remove('dark-mode');
        themeLabel.innerText = 'Dark Mode';
      }
    });
  });
</script>

<!-- Your custom JavaScript -->
<script>
  document.addEventListener("DOMContentLoaded", function () {
  // City links in the City Modal
  const cityLinks = document.querySelectorAll('#contactCityModal a');
  cityLinks.forEach((cityLink) => {
    cityLink.addEventListener('click', function (event) {
      event.preventDefault();
      const city = this.getAttribute('data-city');
      loadEmergencyContacts(city); // Change this line
    });
  });

  function loadEmergencyContacts(city) {
    // Fetch the emergency contacts data from the JSON file
    fetch('emergencyContacts.json')
      .then(response => response.json())
      .then(data => {
        const emergencyContacts = data[city];
        if (emergencyContacts) {
          // If the city is found in the JSON data, populate the modal
          populateEmergencyContacts(emergencyContacts);
        } else {
          // If the city is not found, display an error or handle it as needed
          console.error(`Emergency contacts not found for ${city}`);
        }
      })
      .catch(error => {
        // Handle any errors that occurred during the fetch
        console.error('Error fetching emergency contacts:', error);
      });
  }

      function populateEmergencyContacts(emergencyContacts) {
      const contactListContainer = document.getElementById('emergencyContactList');
      let html = '<ul>';
      for (const [key, value] of Object.entries(emergencyContacts)) {
        if (typeof value === 'object') {
          // For nested objects (e.g., Coast Guard contacts)
          html += `<li><strong>${key}:</strong>`;
          html += '<ul>';
          for (const [subKey, subValue] of Object.entries(value)) {
            html += `<li>${subKey}: ${subValue}</li>`;
          }
          html += '</ul></li>';
        } else {
          html += `<li><strong>${key}:</strong> ${value}</li>`;
        }
      }
      html += '</ul>';

      contactListContainer.innerHTML = html;

      // Show the Emergency Contact Modal
      $('#contactCityModal').modal('hide');
      $('#emergencyContactModal').modal('show');
    }



    // Function to refresh the iframe every 1 minute
    function refreshIframe() {
      const iframe = document.getElementById("earthquakeIframe");
      iframe.src = iframe.src; // This reloads the iframe content

      // Wait for a brief moment to allow the iframe to refresh
      setTimeout(() => {
        identifyFirstRowMagnitude();
      }, 3000); // Adjust the delay based on your needs
    }

    // Function to identify and log/display the magnitude of the first row
    function identifyFirstRowMagnitude() {
      const iframeContent = document.getElementById("earthquakeIframe").contentDocument;
      const firstRowMagnitudeElement = iframeContent.querySelector("td.auto-style56");

      if (firstRowMagnitudeElement) {
        const magnitude = parseFloat(firstRowMagnitudeElement.textContent);

        if (!isNaN(magnitude)) {
          // Log or display a modal message with the magnitude information
          logMessage(`Magnitude of the first row: ${magnitude}`);
        }
      }
    }

    // Function to log or display a message
    function logMessage(message) {
      console.log(message);
      // You can also display the message in an alert or any other way you prefer
      // Example: alert(message);
    }

    // Set interval for automatic refresh every 1 minute (60,000 milliseconds)
    setInterval(refreshIframe, 60000);
  });
</script>

  <footer class="bg-dark text-white p-3 text-center">
    <p>&copy; 2023 Live Earthquake Reports. All rights reserved.</p>
  </footer>

</body>
</html>
